<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: sans-serif; background: #1a1d21; color: white; margin: 0; padding: 15px; padding-bottom: 80px; }
        .page { display: none; }
        .active { display: block; }
        .card { background: #2b2f36; padding: 15px; border-radius: 12px; margin-bottom: 10px; border: 1px solid #3d434d; }
        .flex { display: flex; justify-content: space-between; align-items: center; }
        .price { color: #4CAF50; font-weight: bold; font-size: 1.1em; }
        button.buy { background: #2481cc; border: none; color: white; padding: 10px 20px; border-radius: 10px; font-weight: bold; cursor: pointer; }
        button.buy:active { transform: scale(0.95); background: #1c66a3; }
        .tab-bar { position: fixed; bottom: 0; left: 0; width: 100%; background: #2b2f36; display: flex; justify-content: space-around; padding: 10px 0; border-top: 1px solid #3d434d; }
        .tab { background: none; border: none; color: #888; font-size: 11px; font-weight: bold; text-transform: uppercase; cursor: pointer; }
        .tab.active { color: #2481cc; }
        h2 { margin-top: 0; }
    </style>
</head>
<body>

    <div id="shop" class="page active">
        <h2 style="color: #2481cc;">üõí –ú–∞–≥–∞–∑–∏–Ω</h2>
        <div class="card flex">
            <div><b>–ê—Ä—Ö–∏–≤</b><br><span class="price">250‚ÇΩ</span></div>
            <button class="buy" onclick="sendOrder('–ê—Ä—Ö–∏–≤', 250)">–ó–∞–∫–∞–∑–∞—Ç—å</button>
        </div>
        <div class="card flex">
            <div><b>SEO</b><br><span class="price">130‚ÇΩ</span></div>
            <button class="buy" onclick="sendOrder('SEO', 130)">–ó–∞–∫–∞–∑–∞—Ç—å</button>
        </div>
        <div class="card flex">
            <div><b>–ó–∞–ª–∏–≤</b><br><span class="price">100‚ÇΩ</span></div>
            <button class="buy" onclick="sendOrder('–ó–∞–ª–∏–≤', 100)">–ó–∞–∫–∞–∑–∞—Ç—å</button>
        </div>
    </div>

    <div id="profile" class="page">
        <h2 style="color: #2481cc;">üë§ –ü—Ä–æ—Ñ–∏–ª—å</h2>
        <div class="card">
            <div class="flex" style="margin-bottom: 10px;"><span>–í–∞—à ID:</span> <span id="u_id">...</span></div>
            <div class="flex"><span>–ë–∞–ª–∞–Ω—Å:</span> <span id="u_bal" style="color: #4CAF50;">0‚ÇΩ</span></div>
        </div>
        <p style="font-size: 0.8em; color: #888; text-align: center;">–ë–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</p>
    </div>

    <div class="tab-bar">
        <button class="tab active" id="btn-shop" onclick="tab('shop')">–ú–ê–ì–ê–ó–ò–ù</button>
        <button class="tab" id="btn-profile" onclick="tab('profile')">–ü–†–û–§–ò–õ–¨</button>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.MainButton.textColor = "#FFFFFF";
        tg.MainButton.color = "#2481cc";

        function tab(name) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById(name).classList.add('active');
            document.getElementById('btn-' + name).classList.add('active');
        }

        function sendOrder(name, price) {
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π prompt –¥–ª—è –¢–ó, –Ω–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∏ –∫—Ä–∞—Å–∏–≤–æ–µ –ø–æ–ª–µ –≤ HTML
            let comment = prompt(`–í—ã –∑–∞–∫–∞–∑—ã–≤–∞–µ—Ç–µ ${name} –∑–∞ ${price}‚ÇΩ.\n–í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –∏–ª–∏ –¢–ó:`);
            
            if (comment !== null && comment.trim() !== "") {
                const data = {
                    service: name,
                    price: price,
                    comment: comment
                };
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –±–æ—Ç—É (—ç—Ç–æ –∑–∞–∫—Ä–æ–µ—Ç Mini App –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
                tg.sendData(JSON.stringify(data));
            }
        }

        // –ü–∞—Ä—Å–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ URL (–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—Å–ª–∞–ª –±–æ—Ç)
        const params = new URLSearchParams(window.location.search);
        const userId = params.get('id');
        const userBal = params.get('balance');

        if (userId) document.getElementById('u_id').innerText = userId;
        if (userBal) document.getElementById('u_bal').innerText = userBal + '‚ÇΩ';
    </script>
</body>
</html>
